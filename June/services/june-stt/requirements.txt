# June STT Service - WhisperX Enhanced Dependencies
# Based on official WhisperX requirements
# Reference: https://github.com/m-bain/whisperX

# Web Framework
fastapi==0.104.1
uvicorn==0.24.0
python-multipart

# LiveKit Integration
livekit==0.11.1

# PyTorch (already installed in Dockerfile with CUDA 12.1)
# torch==2.2.0
# torchaudio==2.2.0

# WhisperX - Install from PyPI for stability (v3.7.4 latest stable)
whisperx==3.7.4

# Core Dependencies (compatible versions)
transformers>=4.30.0,<5.0.0
faster-whisper>=1.0.0,<2.0.0
pyannote.audio>=3.1.0,<4.0.0

# Audio Processing (NumPy 2.x compatible)
soundfile==0.12.1
scipy>=1.11.0,<2.0.0
librosa>=0.10.0,<1.0.0
numpy>=1.24.0,<2.0.0

# ctranslate2 for faster-whisper (let whisperx manage this)
# ctranslate2>=4.0.0

# Service Integration
httpx==0.25.2

# Note: Silero VAD will be downloaded from torch.hub automatically
# Note: Alignment models will be downloaded by WhisperX on first use