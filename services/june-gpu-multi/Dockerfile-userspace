# Lightweight Multi-service container with userspace Tailscale networking
FROM ozzuworld/june-multi-gpu:latest

# Add the userspace networking scripts
COPY tailscale-userspace.sh /app/tailscale-userspace.sh
COPY start-services-userspace.sh /app/start-services-userspace.sh

# Make scripts executable
RUN chmod +x /app/tailscale-userspace.sh /app/start-services-userspace.sh

# Set environment variables for userspace networking
ENV TAILSCALE_USERSPACE=true
ENV TAILSCALE_PROXY_PORT=1055

# Default to userspace startup script
CMD ["/app/start-services-userspace.sh"]
